# AiAnalysisBot 工作流程

## 主要流程图

![工作流程图](/Users/apexlin/Desktop/project/AiAnalysisBot/docs/images/workflow.png)

## 详细流程说明

### 1. 消息监听与解析流程
1. 监听目标 Telegram 频道的消息
2. 接收到新消息后，判断消息类型
3. 根据消息类型选择合适的解析器
4. 提取代币信息（地址、名称、价格变化等）
5. 将解析结果传递给 AI 分析模块

### 2. AI 分析决策流程
1. 接收解析后的代币信息
2. 构建分析提示词，包含交易背景和要求
3. 调用 AI 模型（DeepSeek 或 OpenAI）进行分析
4. 解析 AI 返回的结果，提取关键决策信息
5. 判断是否建议购买该代币

### 3. 交易执行流程
1. 如果 AI 建议购买，准备执行购买订单
2. 构建购买命令，包含代币地址和购买金额
3. 发送购买命令到交易机器人
4. 记录交易信息到日志文件
5. 返回交易执行结果

### 4. 策略进化流程
1. 定期加载历史交易数据
2. 提取关键特征（社区情绪、风险评级、资金流动等）
3. 构建分析提示词，要求 AI 分析决策模式
4. 调用 AI 模型分析历史数据
5. 保存分析结果，用于优化未来决策